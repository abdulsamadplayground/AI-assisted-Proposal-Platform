(()=>{var e={};e.id=941,e.ids=[941],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9560:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),t(7973),t(9102),t(2029),t(5866);var r=t(3191),a=t(8716),l=t(7922),o=t.n(l),i=t(5231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(s,n);let d=["",{children:["user",{children:["proposals",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7973)),"C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\user\\proposals\\create\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9102)),"C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\user\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\user\\proposals\\create\\page.tsx"],m="/user/proposals/create/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/user/proposals/create/page",pathname:"/user/proposals/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7351:(e,s,t)=>{Promise.resolve().then(t.bind(t,2485))},4019:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(5578).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2485:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(326),a=t(8069),l=t(7577),o=t(5047),i=t(8426),n=t(5578);let d=(0,n.Z)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);var c=t(4019);let m=(0,n.Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);function x(){let e=(0,o.useRouter)(),[s,t]=(0,l.useState)(1),[n,x]=(0,l.useState)(!1),[u,p]=(0,l.useState)(""),[h,g]=(0,l.useState)(""),[b,f]=(0,l.useState)(""),[y,j]=(0,l.useState)([]),[N,v]=(0,l.useState)([]),[w,C]=(0,l.useState)(!0),[A,k]=(0,l.useState)(null),P=async()=>{try{C(!0),k(null);let e=await fetch(`${a.T5}/api/schemas`,{headers:{"Content-Type":"application/json"}});if(401===e.status){k("Authentication error. Please try again."),i.C.error("Authentication error. Please try again.");return}if(!e.ok)throw Error("Failed to fetch schemas");let s=await e.json();v(s)}catch(s){let e=s instanceof Error?s.message:"Failed to load schemas";k(e),i.C.error(e)}finally{C(!1)}},S=e=>{j(y.filter((s,t)=>t!==e)),i.C.info("File removed")},D=async()=>{if(!b.trim()){i.C.error("Survey notes are required");return}x(!0),i.C.loading("Generating proposal with AI...",{id:"generating"});try{let s=await fetch(`${a.T5}/api/proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:u,schema_id:h,survey_notes:b,attachments:y.map(e=>e.name)})});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to generate proposal")}let t=await s.json();i.C.dismiss("generating"),i.C.success("Proposal generated successfully!"),setTimeout(()=>{let s=t.id||t.proposal?.id;s?e.push(`/user/proposals/${s}`):(console.error("No proposal ID in response:",t),i.C.error("Proposal created but unable to redirect"),e.push("/user/proposals"))},1e3)}catch(e){console.error("Error generating proposal:",e),i.C.dismiss("generating"),i.C.error(e instanceof Error?e.message:"Failed to generate proposal. Please try again.")}finally{x(!1)}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Proposal"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Follow the steps to create your proposal with AI assistance"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:r.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4].map(e=>(0,r.jsxs)("div",{className:"flex items-center flex-1",children:[r.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full font-semibold ${s>=e?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:e}),r.jsx("div",{className:"ml-3 flex-1",children:(0,r.jsxs)("div",{className:`text-sm font-medium ${s>=e?"text-gray-900":"text-gray-500"}`,children:[1===e&&"Title",2===e&&"Schema",3===e&&"Survey Notes",4===e&&"Attachments"]})}),e<4&&r.jsx("div",{className:`h-1 w-full mx-4 ${s>e?"bg-blue-600":"bg-gray-200"}`})]},e))})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[1===s&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Step 1: Enter Proposal Title"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Give your proposal a clear and descriptive title"}),r.jsx("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"e.g., Office Building Construction Proposal",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg",autoFocus:!0})]}),2===s&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Step 2: Select Schema Type"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Choose the schema that best fits your proposal type"}),w?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading schemas..."})]}):A?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Schemas"}),r.jsx("p",{className:"text-gray-600 mb-6",children:A}),r.jsx("button",{onClick:P,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]}):0===N.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC4"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Schemas Available"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Please contact an administrator to create schemas."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(e=>r.jsx("button",{onClick:()=>g(e.id),className:`p-6 border-2 rounded-lg text-left transition-all ${h===e.id?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-blue-400"}`,children:(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center mr-4 mt-1 ${h===e.id?"border-blue-600 bg-blue-600":"border-gray-300"}`,children:h===e.id&&r.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:e.name}),r.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]})},e.id))})]}),3===s&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Step 3: Enter Survey Notes"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Provide detailed notes about your proposal. The AI will use these notes to generate content that follows the schema rules and SOPs."}),r.jsx("textarea",{value:b,onChange:e=>f(e.target.value),placeholder:"Enter your survey notes here...  Example: - Project: Office Building Construction - Location: Downtown Seattle - Budget: $2.5M - Timeline: 18 months - Key Requirements: LEED certification, 5 floors, parking garage - Client: ABC Corporation",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",rows:15,autoFocus:!0}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:[b.length," characters"]})]}),4===s&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Step 4: Add Attachments (Optional)"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Upload any supporting documents, images, or files"}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-6 hover:border-blue-400 transition-colors",children:[r.jsx("input",{type:"file",id:"file-upload",multiple:!0,onChange:e=>{if(e.target.files){let s=Array.from(e.target.files);j([...y,...s]),i.C.success(`${s.length} file(s) added`)}},className:"hidden",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx"}),(0,r.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full",children:r.jsx(d,{className:"w-8 h-8 text-blue-600"})})}),r.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Click to upload files"}),r.jsx("div",{className:"text-sm text-gray-600",children:"or drag and drop files here"}),r.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Supported: Images, PDF, Word, Excel"})]})]}),y.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900 mb-3",children:["Attached Files (",y.length,")"]}),r.jsx("div",{className:"space-y-2",children:y.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center flex-1",children:[r.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 rounded-lg mr-3",children:r.jsx(d,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[(e.size/1024).toFixed(2)," KB"]})]})]}),r.jsx("button",{onClick:()=>S(s),className:"ml-4 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 hover:scale-110",children:r.jsx(c.Z,{className:"w-4 h-4"})})]},s))})]})]}),(0,r.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[r.jsx("button",{onClick:()=>{t(s-1)},disabled:1===s,className:`px-6 py-3 rounded-lg font-medium transition-colors ${1===s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"← Back"}),s<4?r.jsx("button",{onClick:()=>{if(1===s&&!u.trim()){i.C.error("Please enter a proposal title");return}if(2===s&&!h){i.C.error("Please select a schema");return}if(3===s&&!b.trim()){i.C.error("Please enter survey notes");return}t(s+1)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Next →"}):r.jsx("button",{onClick:D,disabled:n,className:`flex items-center gap-2 px-8 py-3 rounded-lg font-medium transition-all duration-200 ${n?"bg-gray-400 text-white cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 hover:scale-105"}`,children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(m,{className:"w-5 h-5"}),"Generate Proposal"]})})]})]}),(0,r.jsxs)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"Proposal Summary"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex",children:[r.jsx("span",{className:"text-blue-700 font-medium w-32",children:"Title:"}),r.jsx("span",{className:"text-blue-900",children:u||"Not set"})]}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx("span",{className:"text-blue-700 font-medium w-32",children:"Schema:"}),r.jsx("span",{className:"text-blue-900",children:N.find(e=>e.id===h)?.name||"Not selected"})]}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx("span",{className:"text-blue-700 font-medium w-32",children:"Survey Notes:"}),r.jsx("span",{className:"text-blue-900",children:b?`${b.length} characters`:"Not entered"})]}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx("span",{className:"text-blue-700 font-medium w-32",children:"Attachments:"}),(0,r.jsxs)("span",{className:"text-blue-900",children:[y.length," file(s)"]})]})]})]})]})}},7973:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\Users\ABDUL SAMAD\Desktop\AI assisted document platform\packages\frontend\src\app\user\proposals\create\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[630,910,430],()=>t(9560));module.exports=r})();