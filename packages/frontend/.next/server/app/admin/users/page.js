(()=>{var e={};e.id=674,e.ids=[674],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5474:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),t(7459),t(9457),t(2029),t(5866);var a=t(3191),r=t(8716),i=t(7922),l=t.n(i),n=t(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7459)),"C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\admin\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9457)),"C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\admin\\users\\page.tsx"],m="/admin/users/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1726:(e,s,t)=>{Promise.resolve().then(t.bind(t,9505))},9505:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(326),r=t(8069),i=t(7577),l=t(434),n=t(8426);function d(){let[e,s]=(0,i.useState)([]),[t,d]=(0,i.useState)([]),[c,o]=(0,i.useState)(!0),[m,x]=(0,i.useState)(null),[h,p]=(0,i.useState)(!1),[u,g]=(0,i.useState)(null),[y,j]=(0,i.useState)(""),f=async()=>{try{o(!0),x(null);let e=await fetch(`${r.T5}/api/users`,{headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch users");let t=await e.json(),a=await fetch(`${r.T5}/api/schemas`,{headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch schemas");let i=await a.json();s(t),d(i)}catch(s){let e=s instanceof Error?s.message:"Failed to load data";x(e),n.C.error(e)}finally{o(!1)}},b=e=>{g(e),j(e.assigned_schema_id||""),p(!0)},N=async()=>{if(!u||!y){n.C.error("Please select a schema");return}try{if(!(await fetch(`${r.T5}/api/users/${u.id}/assign-schema`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({schema_id:y})})).ok)throw Error("Failed to assign schema");let e=t.find(e=>e.id===y);n.C.success(`Schema "${e?.name}" assigned to ${u.name}`),p(!1),f()}catch(s){let e=s instanceof Error?s.message:"Failed to assign schema";n.C.error(e)}},w=e=>e&&0!==e.submissions?Math.round(e.accepted/e.submissions*100):0;return c?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading users..."})]})}):m?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Users"}),a.jsx("p",{className:"text-gray-600 mb-6",children:m}),a.jsx("button",{onClick:f,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage users, assign schemas, and monitor activity"})]}),a.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"➕ Add New User"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),a.jsx("div",{className:"mt-2 text-3xl font-bold text-gray-900",children:e.length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Weekly Submissions"}),a.jsx("div",{className:"mt-2 text-3xl font-bold text-blue-600",children:e.reduce((e,s)=>e+(s.weeklyStats?.submissions||0),0)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Accepted This Week"}),a.jsx("div",{className:"mt-2 text-3xl font-bold text-green-600",children:e.reduce((e,s)=>e+(s.weeklyStats?.accepted||0),0)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Avg Acceptance Rate"}),(0,a.jsxs)("div",{className:"mt-2 text-3xl font-bold text-purple-600",children:[e.length>0?Math.round(e.reduce((e,s)=>e+w(s.weeklyStats),0)/e.length):0,"%"]})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Schema"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Weekly Activity"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acceptance Rate"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Active"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium",children:e.name.split(" ").map(e=>e[0]).join("")})}),(0,a.jsxs)("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),a.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.assigned_schema_name||"No schema assigned"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:e.weeklyStats?(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{title:"Submissions",children:["\uD83D\uDCDD ",e.weeklyStats.submissions]}),(0,a.jsxs)("span",{title:"Accepted",className:"text-green-600",children:["✓ ",e.weeklyStats.accepted]}),(0,a.jsxs)("span",{title:"Rejected",className:"text-red-600",children:["✗ ",e.weeklyStats.rejected]}),(0,a.jsxs)("span",{title:"Needs Editing",className:"text-yellow-600",children:["✏️ ",e.weeklyStats.needsEditing]})]}):a.jsx("span",{className:"text-gray-400",children:"No data"})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.weeklyStats?(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${w(e.weeklyStats)}%`}})}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[w(e.weeklyStats),"%"]})]}):a.jsx("span",{className:"text-gray-400",children:"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx("button",{onClick:()=>b(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Assign Schema"}),a.jsx(l.default,{href:`/admin/users/${e.id}`,className:"text-green-600 hover:text-green-900",children:"View Details"})]})]},e.id))})]})}),h&&u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Assign Schema to ",u.name]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Schema"}),(0,a.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-900",children:[a.jsx("option",{value:"",className:"text-gray-900",children:"Select a schema"}),t.map(e=>a.jsx("option",{value:e.id,className:"text-gray-900",children:e.name},e.id))]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:a.jsx("p",{className:"text-sm text-blue-700",children:"This user will use the selected schema for all their proposal submissions. The schema defines sections, rules, and SOPs that will be enforced."})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),a.jsx("button",{onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Assign Schema"})]})]})})]})}},7459:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`C:\Users\ABDUL SAMAD\Desktop\AI assisted document platform\packages\frontend\src\app\admin\users\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[630,910,194],()=>t(5474));module.exports=a})();