(()=>{var e={};e.id=465,e.ids=[465],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1560:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(6796),s(9457),s(2029),s(5866);var a=s(3191),r=s(8716),l=s(7922),n=s.n(l),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["admin",{children:["schemas",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6796)),"C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\admin\\schemas\\create\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9457)),"C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\ABDUL SAMAD\\Desktop\\AI assisted document platform\\packages\\frontend\\src\\app\\admin\\schemas\\create\\page.tsx"],m="/admin/schemas/create/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/schemas/create/page",pathname:"/admin/schemas/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8349:(e,t,s)=>{Promise.resolve().then(s.bind(s,7130))},7130:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(326),r=s(8069),l=s(7577),n=s(5047),i=s(8426);function o(){let e=(0,n.useRouter)(),[t,s]=(0,l.useState)(""),[o,d]=(0,l.useState)(""),[c,m]=(0,l.useState)([]),[x,p]=(0,l.useState)(null),[u,g]=(0,l.useState)(!1),[h,y]=(0,l.useState)(!1),[b,f]=(0,l.useState)(null),[j,N]=(0,l.useState)({name:"",displayName:"",description:"",required:!0,outputFormat:"text",minLength:"",maxLength:"",fontColor:"#000000",fontSize:"16px",position:"left"}),[v,w]=(0,l.useState)({name:"",description:"",enforcement:"strict",type:"length",parameters:{}}),S=e=>{N({name:e.name,displayName:e.displayName,description:e.description,required:e.required,outputFormat:e.outputFormat,minLength:e.minLength?.toString()||"",maxLength:e.maxLength?.toString()||"",fontColor:e.fontColor,fontSize:e.fontSize,position:e.position}),f(e.id),p(e),g(!0)},C=e=>{let t=c.find(t=>t.id===e);t&&(p(t),w({name:"",description:"",enforcement:"strict",type:"length",parameters:{}}),y(!0))},k=e=>{window.confirm("Are you sure you want to delete this section?")&&(m(c.filter(t=>t.id!==e)),i.Z.success("Section deleted"))},L=(e,t)=>{window.confirm("Are you sure you want to delete this SOP?")&&(m(c.map(s=>s.id===e?{...s,sops:s.sops.filter(e=>e.id!==t)}:s)),i.Z.success("SOP deleted"))},P=async()=>{if(!t){i.Z.error("Please enter a schema title");return}if(0===c.length){i.Z.error("Please add at least one section");return}let s=i.Z.loading("Creating schema..."),a={name:t,version:"1.0.0",description:o,sections:c.map(e=>({id:e.id,name:e.name,display_name:e.displayName,description:e.description,required:e.required,order:e.order,output_format:e.outputFormat,min_length:e.minLength,max_length:e.maxLength,rules:e.sops.map(e=>({id:e.id,name:e.name,type:e.type,description:e.description,enforcement:e.enforcement,parameters:e.parameters,error_message:`Rule violation: ${e.name}`})),styling:{font_color:e.fontColor,font_size:e.fontSize,position:e.position}})),global_rules:[]};try{let t=await fetch(`${r.T5}/api/schemas`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){let e=await t.json();throw Error(e.message||"Failed to create schema")}i.Z.dismiss(s),i.Z.success("Schema created successfully!"),setTimeout(()=>e.push("/admin/schemas"),1e3)}catch(e){i.Z.dismiss(s),i.Z.error(e instanceof Error?e.message:"Failed to create schema")}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Create New Schema"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schema Title *"}),a.jsx("input",{type:"text",value:t,onChange:e=>s(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Construction Proposal Schema"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{value:o,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Describe the purpose of this schema..."})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Sections"}),a.jsx("button",{onClick:()=>{N({name:"",displayName:"",description:"",required:!0,outputFormat:"text",minLength:"",maxLength:"",fontColor:"#000000",fontSize:"16px",position:"left"}),f(null),p(null),g(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"➕ Add Section"})]}),0===c.length?(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[a.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCC4"}),a.jsx("p",{children:'No sections added yet. Click "Add Section" to get started.'})]}):a.jsx("div",{className:"space-y-4",children:c.sort((e,t)=>e.order-t.order).map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",e.order]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.displayName}),e.required&&a.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded",children:"Required"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Format: ",e.outputFormat]}),e.minLength&&(0,a.jsxs)("span",{children:["Min: ",e.minLength," chars"]}),e.maxLength&&(0,a.jsxs)("span",{children:["Max: ",e.maxLength," chars"]}),(0,a.jsxs)("span",{style:{color:e.fontColor},children:["Color: ",e.fontColor]}),(0,a.jsxs)("span",{children:["Size: ",e.fontSize]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>S(e),className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Edit"}),a.jsx("button",{onClick:()=>k(e.id),className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Delete"})]})]}),(0,a.jsxs)("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"SOPs (Standard Operating Procedures) - STRICTLY ENFORCED"}),a.jsx("button",{onClick:()=>C(e.id),className:"px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700",children:"➕ Add SOP"})]}),0===e.sops.length?a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No SOPs defined yet"}):a.jsx("div",{className:"space-y-2",children:e.sops.map(t=>a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded p-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-medium text-sm text-gray-900",children:t.name}),a.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${"strict"===t.enforcement?"bg-red-100 text-red-800":"warning"===t.enforcement?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:t.enforcement.toUpperCase()})]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:t.description}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Type: ",t.type]})]}),a.jsx("button",{onClick:()=>L(e.id,t.id),className:"text-red-600 hover:text-red-800 text-sm",children:"✕"})]})},t.id))})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{onClick:()=>e.push("/admin/schemas"),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:P,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"\uD83D\uDCBE Save Schema"})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full m-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:b?"Edit Section":"Add New Section"}),(0,a.jsxs)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section Name (ID) *"}),a.jsx("input",{type:"text",value:j.name,onChange:e=>N({...j,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., executive_summary"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Name *"}),a.jsx("input",{type:"text",value:j.displayName,onChange:e=>N({...j,displayName:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Executive Summary"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{value:j.description,onChange:e=>N({...j,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"Describe this section..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Output Format"}),(0,a.jsxs)("select",{value:j.outputFormat,onChange:e=>N({...j,outputFormat:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-900",children:[a.jsx("option",{value:"text",className:"text-gray-900",children:"Text"}),a.jsx("option",{value:"structured",className:"text-gray-900",children:"Structured"}),a.jsx("option",{value:"list",className:"text-gray-900",children:"List"}),a.jsx("option",{value:"markdown",className:"text-gray-900",children:"Markdown"})]})]}),a.jsx("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:j.required,onChange:e=>N({...j,required:e.target.checked}),className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Required Section"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Length (characters)"}),a.jsx("input",{type:"number",value:j.minLength,onChange:e=>N({...j,minLength:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 100"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Length (characters)"}),a.jsx("input",{type:"number",value:j.maxLength,onChange:e=>N({...j,maxLength:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 1000"})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Styling Options"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Color"}),a.jsx("input",{type:"color",value:j.fontColor,onChange:e=>N({...j,fontColor:e.target.value}),className:"w-full h-10 border border-gray-300 rounded-lg"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),(0,a.jsxs)("select",{value:j.fontSize,onChange:e=>N({...j,fontSize:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-900",children:[a.jsx("option",{value:"12px",className:"text-gray-900",children:"12px"}),a.jsx("option",{value:"14px",className:"text-gray-900",children:"14px"}),a.jsx("option",{value:"16px",className:"text-gray-900",children:"16px"}),a.jsx("option",{value:"18px",className:"text-gray-900",children:"18px"}),a.jsx("option",{value:"20px",className:"text-gray-900",children:"20px"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position"}),(0,a.jsxs)("select",{value:j.position,onChange:e=>N({...j,position:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-900",children:[a.jsx("option",{value:"left",className:"text-gray-900",children:"Left"}),a.jsx("option",{value:"center",className:"text-gray-900",children:"Center"}),a.jsx("option",{value:"right",className:"text-gray-900",children:"Right"}),a.jsx("option",{value:"justify",className:"text-gray-900",children:"Justify"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),a.jsx("button",{onClick:()=>{if(!j.name||!j.displayName){i.Z.error("Please fill in required fields (Name and Display Name)");return}let e={id:b||`section-${Date.now()}`,name:j.name,displayName:j.displayName,description:j.description,required:j.required,order:b?x.order:c.length+1,outputFormat:j.outputFormat,minLength:j.minLength?parseInt(j.minLength):void 0,maxLength:j.maxLength?parseInt(j.maxLength):void 0,fontColor:j.fontColor,fontSize:j.fontSize,position:j.position,sops:b?x.sops:[]};b?(m(c.map(t=>t.id===b?e:t)),i.Z.success("Section updated successfully")):(m([...c,e]),i.Z.success("Section added successfully")),g(!1),p(null),f(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:b?"Update Section":"Add Section"})]})]})}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full m-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add SOP (Standard Operating Procedure)"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"SOPs are STRICTLY ENFORCED by the Rule + LLM engine during content generation."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SOP Name *"}),a.jsx("input",{type:"text",value:v.name,onChange:e=>w({...v,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Minimum Word Count"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),a.jsx("textarea",{value:v.description,onChange:e=>w({...v,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"Describe what this SOP enforces..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enforcement Level *"}),(0,a.jsxs)("select",{value:v.enforcement,onChange:e=>w({...v,enforcement:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-900",children:[a.jsx("option",{value:"strict",className:"text-gray-900",children:"Strict (Must Pass)"}),a.jsx("option",{value:"warning",className:"text-gray-900",children:"Warning (Can Proceed)"}),a.jsx("option",{value:"advisory",className:"text-gray-900",children:"Advisory (Suggestion)"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rule Type *"}),(0,a.jsxs)("select",{value:v.type,onChange:e=>w({...v,type:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-900",children:[a.jsx("option",{value:"length",className:"text-gray-900",children:"Length"}),a.jsx("option",{value:"pattern",className:"text-gray-900",children:"Pattern"}),a.jsx("option",{value:"required_field",className:"text-gray-900",children:"Required Field"}),a.jsx("option",{value:"validation",className:"text-gray-900",children:"Validation"}),a.jsx("option",{value:"format",className:"text-gray-900",children:"Format"})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),a.jsx("button",{onClick:()=>{if(!v.name||!v.description){i.Z.error("Please fill in required fields (Name and Description)");return}let e={id:`sop-${Date.now()}`,name:v.name,description:v.description,enforcement:v.enforcement,type:v.type,parameters:v.parameters};m(c.map(t=>t.id===x?.id?{...t,sops:[...t.sops,e]}:t)),y(!1),p(null),i.Z.success("SOP added successfully - Will be STRICTLY ENFORCED")},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Add SOP"})]})]})})]})}},6796:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\ABDUL SAMAD\Desktop\AI assisted document platform\packages\frontend\src\app\admin\schemas\create\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[630,910,194],()=>s(1560));module.exports=a})();